(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc3f0ee6"],{"5dc7":function(e,o,t){"use strict";t("eeb6")},ae9b:function(e,o,t){"use strict";t.r(o);var i=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.screenLoading,expression:"this.screenLoading"}],staticClass:"form-wrap"},[t("el-form",{attrs:{model:e.JobForm,"label-width":"90px"}},[t("el-form-item",[t("div",{staticClass:"form-title"},[e._v("定时任务管理平台")])]),t("el-form-item",{attrs:{label:"选择任务"}},[t("el-select",{attrs:{clearable:"",filterable:"",remote:"","remote-method":e.queryRemoteNativeJobs,loading:e.remoteLoading,size:"medium",placeholder:"请选择原生任务"},model:{value:e.JobForm.native_job_id,callback:function(o){e.$set(e.JobForm,"native_job_id",o)},expression:"JobForm.native_job_id"}},e._l(e.nativeJobList,(function(e,o){return t("el-option",{key:o,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"任务名称"}},[t("el-input",{attrs:{size:"medium",placeholder:"定时任务名称（必须填写）"},model:{value:e.JobForm.title,callback:function(o){e.$set(e.JobForm,"title",o)},expression:"JobForm.title"}})],1),t("el-form-item",{attrs:{label:"任务备注"}},[t("el-input",{attrs:{size:"medium",placeholder:"定时说明（建议填写）"},model:{value:e.JobForm.remark,callback:function(o){e.$set(e.JobForm,"remark",o)},expression:"JobForm.remark"}})],1),t("el-form-item",{attrs:{label:"任务定时"}},[t("crontab",{attrs:{cronExpression:e.cronExpression},on:{setCronExpression:e.setCronExpression}})],1),t("el-form-item",{attrs:{label:"运行次数"}},[t("el-input-number",{staticClass:"form-input-number",attrs:{min:0,max:1e3,size:"medium",label:"执行次数"},model:{value:e.JobForm.max_run_cnt,callback:function(o){e.$set(e.JobForm,"max_run_cnt",o)},expression:"JobForm.max_run_cnt"}}),t("span",{staticClass:"alert-info"},[t("i",{staticClass:"el-icon-warning-outline"}),e._v(" 定时任务执行的最大次数，0默认无限次")])],1),t("el-form-item",{attrs:{label:"Cron表达式"}},[t("el-input",{attrs:{placeholder:"* * * * *",readonly:""},model:{value:e.cronExpression,callback:function(o){e.cronExpression=o},expression:"cronExpression"}})],1),t("el-form-item",{attrs:{label:"启用"}},[t("el-checkbox",{model:{value:e.JobForm.is_enabled,callback:function(o){e.$set(e.JobForm,"is_enabled",o)},expression:"JobForm.is_enabled"}},[e._v("立即启动该任务")])],1)],1),t("el-row",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.testCronExpression}},[e._v(" 测试 Cron ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.createPeriodicJob}},[e._v(" 添加任务 ")])],1),t("DialogCronBox",{attrs:{dialogVisible:e.dialogVisible,expr:e.cronExpression,maxRunCnt:e.JobForm.max_run_cnt},on:{setDialogVisible:e.setDialogVisible}})],1)},n=[],a=t("5530"),r=t("76fe"),s=t("bdd0"),l=t("b9e3"),c={name:"AddTask",components:{Crontab:s["a"],DialogCronBox:l["a"]},data:function(){return{screenLoading:!0,remoteLoading:!1,nativeJobList:[],JobForm:{native_job_id:null,title:"",remark:"",max_run_cnt:0,is_enabled:!1},dialogVisible:!1,cronExpression:"* * * * *"}},mounted:function(){this.getNativeJobs()},watch:{},methods:{setDialogVisible:function(e){this.dialogVisible=e},setCronExpression:function(e){this.cronExpression=e},getNativeJobs:function(){var e=this;Object(r["b"])({}).then((function(o){e.nativeJobList=o.data.results,e.screenLoading=!1,e.remoteLoading=!1}))},queryRemoteNativeJobs:function(){this.remoteLoading=!0,this.getNativeJobs()},testCronExpression:function(){this.dialogVisible=!0,console.log("this.dialogVisible: ".concat(this.dialogVisible))},createPeriodicJob:function(){var e=this,o=Object(a["a"])(Object(a["a"])({},this.JobForm),{},{cron_expr:this.cronExpression});Object(r["a"])(o).then((function(o){200!==o.code?e.$message.error("添加新定时任务失败: ".concat(o.message)):e.$router.push("/task/manage")}))}}},m=c,b=(t("5dc7"),t("2877")),u=Object(b["a"])(m,i,n,!1,null,"96728b32",null);o["default"]=u.exports},eeb6:function(e,o,t){}}]);