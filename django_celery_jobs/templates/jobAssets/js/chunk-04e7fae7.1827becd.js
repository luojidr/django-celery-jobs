(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04e7fae7"],{"3c51":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:"",model:e.nativeJobQuery}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"任务名"},model:{value:e.nativeJobQuery.name,callback:function(t){e.$set(e.nativeJobQuery,"name",t)},expression:"nativeJobQuery.name"}})],1),a("el-form-item",{staticClass:"inline-query-item",attrs:{label:"任务路径"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"任务路径"},model:{value:e.nativeJobQuery.task,callback:function(t){e.$set(e.nativeJobQuery,"task",t)},expression:"nativeJobQuery.task"}})],1),a("el-form-item",{staticClass:"inline-query-item"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getNativeJobs(1)}}},[e._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.nativeJobList,"element-loading-text":"Loading",border:"","highlight-current-row":"","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",align:"center",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",align:"center",label:"任务名"}}),a("el-table-column",{attrs:{prop:"task",align:"center",label:"任务路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",trigger:"hover",width:"350","popper-class":"row-column-popover",content:t.row.task}},[a("span",{staticClass:"row-hidden-text",attrs:{slot:"reference"},domProps:{textContent:e._s(t.row.task)},slot:"reference"})])]}}])}),a("el-table-column",{attrs:{prop:"priority",align:"center",label:"优先级",width:"80"}}),a("el-table-column",{attrs:{prop:"ignore_result",align:"center",label:"任务结果",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ignore_result?a("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("保留")]):a("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("不保留")])]}}])}),a("el-table-column",{attrs:{prop:"backend",align:"center",label:"Backend"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",trigger:"hover",width:"350","popper-class":"row-column-popover",content:t.row.backend}},[a("span",{staticClass:"row-hidden-text",attrs:{slot:"reference"},domProps:{textContent:e._s(t.row.ignore_result?t.row.backend:"-")},slot:"reference"})])]}}])}),a("el-table-column",{attrs:{prop:"desc",align:"center",label:"备注"}}),a("el-table-column",{attrs:{prop:"",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"primary",size:"small"},on:{click:function(a){return e.openNativeJobDialog(t.row)}}},[e._v(" 编辑 ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.nativeJobQuery.page,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.nativeJobQuery.totalCount},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,center:"","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogVisible=!1}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.nativeJobForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"任务名"},model:{value:e.nativeJobForm.name,callback:function(t){e.$set(e.nativeJobForm,"name",t)},expression:"nativeJobForm.name"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{size:"small",placeholder:"备注"},model:{value:e.nativeJobForm.desc,callback:function(t){e.$set(e.nativeJobForm,"desc",t)},expression:"nativeJobForm.desc"}})],1),a("el-form-item",{attrs:{label:"优先级"}},[a("el-input",{attrs:{size:"small",readonly:"",clearable:"",placeholder:"优先级"},model:{value:e.nativeJobForm.priority,callback:function(t){e.$set(e.nativeJobForm,"priority",t)},expression:"nativeJobForm.priority"}})],1),a("el-form-item",{attrs:{label:"任务路径"}},[a("el-input",{attrs:{size:"small",readonly:"",placeholder:"任务路径"},model:{value:e.nativeJobForm.task,callback:function(t){e.$set(e.nativeJobForm,"task",t)},expression:"nativeJobForm.task"}})],1),a("el-form-item",{attrs:{label:"Backend"}},[a("el-input",{attrs:{size:"small",readonly:"",placeholder:"任务路径"},model:{value:e.nativeJobForm.backend,callback:function(t){e.$set(e.nativeJobForm,"backend",t)},expression:"nativeJobForm.backend"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.editNativeJob}},[e._v("确 定")])],1)],1)],1)},o=[],i=(a("8ba4"),a("a9e3"),a("b0c0"),a("76fe")),r={name:"NativeTask",data:function(){return{nativeJobQuery:{name:"",task:"",page:1,totalCount:100},listLoading:!0,nativeJobList:[],dialogTitle:"编辑任务",dialogVisible:!1,nativeJobForm:{id:null,name:"",task:"",priority:null,backend:"",desc:""}}},mounted:function(){this.getNativeJobs()},computed:{},methods:{getNativeJobs:function(e){var t=this;this.listLoading=!0,Number.isInteger(e)&&(this.nativeJobQuery.page=e),Object(i["b"])(this.nativeJobQuery).then((function(e){console.log(e),t.nativeJobList=e.data.results,t.nativeJobQuery.totalCount=e.data.count,t.listLoading=!1}))},openNativeJobDialog:function(e){this.dialogVisible=!0,this.nativeJobForm=e},editNativeJob:function(){var e=this,t={id:this.nativeJobForm.id,name:this.nativeJobForm.name,desc:this.nativeJobForm.desc};Object(i["e"])(t).then((function(t){console.log(t),e.dialogVisible=!1,e.getNativeJobs()}))},handleCurrentChange:function(e){console.log("handleCurrentChange page:"+e),this.getNativeJobs(e)}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,o,!1,null,"051de883",null);t["default"]=c.exports},"5e89":function(e,t,a){var n=a("861d"),o=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&o(e)===e}},"76fe":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return b})),a.d(t,"f",(function(){return d}));var n=a("5530"),o=(a("8ba4"),a("a9e3"),a("b775")),i=a("a417");function r(e){e||(e={});var t=e.page,a=e.pageSize;return Object(n["a"])(Object(n["a"])({},e),{},{page:Number.isInteger(t)?t:1,pageSize:Number.isInteger(a)?t:10})}function l(e){return Object(o["a"])({url:"".concat(i["a"],"/native/job/list"),method:"get",params:Object(n["a"])({},r(e))})}function s(e){return Object(o["a"])({url:"".concat(i["a"],"/native/job/update"),method:"post",data:e})}function c(e,t,a){return Object(o["a"])({url:"".concat(i["a"],"/periodic/job/cron/parse"),method:"get",params:{cron_expr:e,max_run_cnt:t,job_id:a||0}})}function u(e){return Object(o["a"])({url:"".concat(i["a"],"/periodic/job/list"),method:"get",params:Object(n["a"])({},r(e))})}function b(e){return Object(o["a"])({url:"".concat(i["a"],"/periodic/job/add"),method:"post",data:e})}function d(e){return Object(o["a"])({url:"".concat(i["a"],"/periodic/job/update"),method:"post",data:e})}},"8ba4":function(e,t,a){var n=a("23e7"),o=a("5e89");n({target:"Number",stat:!0},{isInteger:o})}}]);